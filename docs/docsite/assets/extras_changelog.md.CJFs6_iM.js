import{_ as a,c as o,o as d,ae as i}from"./chunks/framework.Dh1jimFm.js";const m=JSON.parse('{"title":"Changelog","description":"","frontmatter":{},"headers":[],"relativePath":"extras/changelog.md","filePath":"extras/changelog.md"}'),n={name:"extras/changelog.md"};function t(l,e,r,h,c,s){return d(),o("div",null,e[0]||(e[0]=[i('<h1 id="changelog" tabindex="-1">Changelog <a class="header-anchor" href="#changelog" aria-label="Permalink to &quot;Changelog&quot;">​</a></h1><p>All notable changes to this project will be documented in this file.</p><h2 id="unreleased" tabindex="-1">[Unreleased] <a class="header-anchor" href="#unreleased" aria-label="Permalink to &quot;[Unreleased]&quot;">​</a></h2><ul><li>v0.7... add masking to blur_face_region()</li><li>v0.7... expand timing function availability to blurring, occluding and noise</li><li>v0.7... expanded functionality to extract_face_color_means()</li><li>v0.8... full docsite reimplementation with vitepress</li><li>v1.0 gui preview prior to file processing</li></ul><h2 id="_0-7-2-2025-03-10" tabindex="-1">[0.7.2] 2025-03-10 <a class="header-anchor" href="#_0-7-2-2025-03-10" aria-label="Permalink to &quot;[0.7.2] 2025-03-10&quot;">​</a></h2><h3 id="added" tabindex="-1">Added <a class="header-anchor" href="#added" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>A full pytest test suite has been implemented, covering all of the main package functionality found in pyfame.core. The test suite automatically disables file logging when running tests (via conftest.py setting an env variable) as to not bloat up the log files.</li><li><code>exceptions.py</code> has been implemented, containing several custom exceptions aimed at handling unrecognized file extensions, and image file IO errors.</li></ul><h3 id="changed" tabindex="-1">Changed <a class="header-anchor" href="#changed" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Pyfames package structure has been completely reworked into a more readable and modular format. Previously, all of the packages main functions were in a top level file pyfame.py. Pyfame&#39;s package structure is now as follows: <ul><li>The top level package pyfame has two submodules <code>.core</code> and <code>.utils</code><ul><li><code>.core</code> contains the packages main functions, which have been divied up into <code>analysis.py</code>, <code>coloring.py</code>, <code>occlusion.py</code>, <code>point_light_display.py</code>, <code>scrambling.py</code> and <code>temporal_transforms.py</code>.</li><li>all of the main functions are accessible via &#39;import pyfame.core&#39;</li><li><code>.utils</code> contains the packages utility functions, predefined landmark regions and global constants all previously found in a top level <code>pyfame_utils.py</code></li><li><code>.utils</code> has been divied up into <code>display_options.py</code>, <code>landmarks.py</code>, <code>predefined_constants.py</code> and <code>timing_functions.py</code></li><li>all of the utility funtions are accessible via &#39;import pyfame.utils&#39;</li></ul></li></ul></li><li><code>setup_logging()</code> has been moved to its own file <code>setup_logging.py</code> to avoid circular import errors. Additionally, the function now checks for an os.environ variable <code>PYTEST_RUNNING</code> prior to setting up the logging, in order to avoid writing file logs while running the test suite.</li><li>Testing exposed several bugs with input parameters being read in as an uncooperative integer type. There were multiple cases of integer input params being read in as int64 rather than uint8 as cv2 expects, which did not raise a TypeError but resulted in corrupt file outputs. This has been patched in <code>mask_face_region()</code>, <code>occlude_face_region()</code>, and <code>generate_point_light_display()</code>.</li></ul><h3 id="removed" tabindex="-1">Removed <a class="header-anchor" href="#removed" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-7-1-2025-02-27" tabindex="-1">[0.7.1] 2025-02-27 <a class="header-anchor" href="#_0-7-1-2025-02-27" aria-label="Permalink to &quot;[0.7.1] 2025-02-27&quot;">​</a></h2><h3 id="added-1" tabindex="-1">Added <a class="header-anchor" href="#added-1" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Display functions have been implemented for all of the predefined constants, defined within pyfame_utils.py. Users can now simply call <code>display_shuffle_method_options()</code> for example, and the constants names and literal values will be printed to the terminal.</li><li>Normalised gaussian timing function has finally been implemented properly.</li></ul><h3 id="changed-1" tabindex="-1">Changed <a class="header-anchor" href="#changed-1" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Function Docstrings and error messages have been made more comprehensive, and now reference display functions in pyfame_utils when encountering ValueErrors for input parameters.</li><li>Bug fixes to several parameter error checks implemented with parameter file-logging.</li></ul><h3 id="removed-1" tabindex="-1">Removed <a class="header-anchor" href="#removed-1" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-7-0-2025-02-16" tabindex="-1">[0.7.0] 2025-02-16 <a class="header-anchor" href="#_0-7-0-2025-02-16" aria-label="Permalink to &quot;[0.7.0] 2025-02-16&quot;">​</a></h2><h3 id="added-2" tabindex="-1">Added <a class="header-anchor" href="#added-2" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>generate_shuffled_block_array()</code> has been implemented. This function was designed to be used alongside <code>shuffle_frame_order()</code> in order to abstract the block ordering from the user. <code>generate_shuffled_block_array()</code> takes in a file_path, shuffle_method and block_duration (in milliseconds) and returns a tuple of (block_order, block_size). This output can now directly be fed as an input parameter to <code>shuffle_frame_order()</code>, and <code>shuffle_frame_order()</code> will now call <code>generate_shuffled_block_array()</code> internally if no block_order is provided.</li><li>Several new frame shuffling methods have been added including random sampling with replacement, left and right cyclic shift, palindrome shuffling and frame interleaving.</li><li>All functions now make use of logging. Standard logs can be found at PyFAME/logs/app.log. This file will be cycled once it reaches 5mb, and the last 5 log files will be stored in the logs folder. Error logs can be found at PyFAME/logs/error.log. This file will be rotated in a similar manner to the standard log. All functions now log their input parameters, various status updates on execution, and all parameter or execution errors that are raised.</li><li>Logging configurations can be found in the PyFAME/config folder in <code>log_config.yaml</code></li></ul><h3 id="changed-2" tabindex="-1">Changed <a class="header-anchor" href="#changed-2" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Several internal changes to <code>shuffle_frame_order()</code>. Many of the array-randomizing functionalities have been rescoped to <code>generate_shuffled_block_array()</code>.</li><li>Shuffle_methods have been given a new naming scheme, all of the constant variable names follow the following format: FRAME_SHUFFLE_{method name}.</li><li>Bug fixes to <code>get_optical_flow()</code>, specifically the dense optical flow implementation a bug fix was required over the writing of flow vectors to a csv file.</li><li><code>Extract_face_color_means()</code> can now handle static images, on top of video files.</li></ul><h3 id="removed-2" tabindex="-1">Removed <a class="header-anchor" href="#removed-2" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-7-2025-01-18" tabindex="-1">[0.6.7] - 2025-01-18 <a class="header-anchor" href="#_0-6-7-2025-01-18" aria-label="Permalink to &quot;[0.6.7] - 2025-01-18&quot;">​</a></h2><h3 id="added-3" tabindex="-1">Added <a class="header-anchor" href="#added-3" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Function <code>shuffle_frame_order()</code> can now take an input parameter <code>block_order</code>, a list of integers. When <code>block_order</code> is provided, <code>block_size</code> will be automatically computed based on the length of the block order list. For example, given a block order of [1,0,3,2,4,5], the function will compute <code>block_size</code> by taking the total frame count and dividing it by the length of the list.</li></ul><h3 id="changed-3" tabindex="-1">Changed <a class="header-anchor" href="#changed-3" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Function <code>get_optical_flow()</code> now takes a parameter <code>optical_flow_type</code>. The function now includes the option to compute Farneback&#39;s dense optical flow on top of Lucas-Kanade sparse optical flow. Several other Farneback control parameters have been added to the function, but have all been defined with defaults and typical values in the function documentation.</li><li>Furthermore, due to the sheer size of outputted csv files from <code>get_optical_flow()</code>, a new parameter <code>csv_sample_freq</code> has been added. This value (given in milliseconds) determines how frequently the function will write out optical flow vectors to the outputted csv file. This is implemented using a rolling time window, and comparing the current video timestamp with its value at each iteration of the running loop.</li></ul><h3 id="removed-3" tabindex="-1">Removed <a class="header-anchor" href="#removed-3" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-6-2025-01-11" tabindex="-1">[0.6.6] - 2025-01-11 <a class="header-anchor" href="#_0-6-6-2025-01-11" aria-label="Permalink to &quot;[0.6.6] - 2025-01-11&quot;">​</a></h2><h3 id="added-4" tabindex="-1">Added <a class="header-anchor" href="#added-4" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>shuffle_frame_order()</code> has been implemented. The function has two running modes: <code>SHUFFLE_FRAME_ORDER</code> and <code>REVERSE_FRAME_ORDER</code>. Frames are read from the input video and stored in blocks, who&#39;s size is determined by input parameter <code>block_size</code>. Given an input video running at 30 fps, the default <code>block_size</code> of 30 will shuffle the order of roughly 1 second segments of the video file. The output order of the frame blocks is determined randomly. Users may pass a <code>rand_seed</code> to seed the rng for reproducable results.</li></ul><h3 id="changed-4" tabindex="-1">Changed <a class="header-anchor" href="#changed-4" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-4" tabindex="-1">Removed <a class="header-anchor" href="#removed-4" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-5-2025-01-02" tabindex="-1">[0.6.5] - 2025-01-02 <a class="header-anchor" href="#_0-6-5-2025-01-02" aria-label="Permalink to &quot;[0.6.5] - 2025-01-02&quot;">​</a></h2><h3 id="added-5" tabindex="-1">Added <a class="header-anchor" href="#added-5" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Function <code>point_light_display()</code> has been further expanded. Now the function can display point displacement history, which can be drawn on the output file in one of two methods. Displacement history can be toggled on and off using the input parameter <code>show_history</code>. <code>SHOW_HISTORY_ORIGIN</code> will draw the displacement vector for each point relative to their original positions in frame 1. <code>SHOW_HISTORY_RELATIVE</code> will draw each points path history, displaying each path segment for a set amount of time given by input parameter <code>history_window_msec</code>.</li></ul><h3 id="changed-5" tabindex="-1">Changed <a class="header-anchor" href="#changed-5" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Previously, removing points to satisfy the <code>point_density</code> was done purely randomly. However this caused issues abstracting the shapes of the landmark regions, making them difficult to identify. Point removal has been reimplemented using a normal gaussian distribution to control which points are removed and which are retained. As a result, even at lower densities the points stay clustered as to maintain the shape of the landmark they are tracking.</li><li>Point size and color were previously hard-coded values. New parameters <code>point_color</code>, <code>point_radius</code>, and <code>history_color</code> allow the user to customize how the functions outputs appear.</li></ul><h3 id="removed-5" tabindex="-1">Removed <a class="header-anchor" href="#removed-5" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-4-2024-12-30" tabindex="-1">[0.6.4] - 2024-12-30 <a class="header-anchor" href="#_0-6-4-2024-12-30" aria-label="Permalink to &quot;[0.6.4] - 2024-12-30&quot;">​</a></h2><h3 id="added-6" tabindex="-1">Added <a class="header-anchor" href="#added-6" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>point_light_display()</code> has been implemented. The function utilises the 478 landmark points tracked by the mediapipe FaceMesh to generate a point-light display of the face. The default functionality displays all 478 landmark points. However, users may provide landmark sets or predefined landmark sets from <code>pyfameutils</code> to the input parameter <code>landmarks_regions</code> to further specify which regions or landmarks will be included in the functions output.</li><li>Users may wish to manipulate the number of points without affecting the overall shape of the landmark regions. In order to do so, users may provide a floating point density to the input parameter <code>point_density</code>.</li></ul><h3 id="changed-6" tabindex="-1">Changed <a class="header-anchor" href="#changed-6" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-6" tabindex="-1">Removed <a class="header-anchor" href="#removed-6" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-3-2024-12-22" tabindex="-1">[0.6.3] - 2024-12-22 <a class="header-anchor" href="#_0-6-3-2024-12-22" aria-label="Permalink to &quot;[0.6.3] - 2024-12-22&quot;">​</a></h2><h3 id="added-7" tabindex="-1">Added <a class="header-anchor" href="#added-7" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Expanded functionality for function <code>get_optical_flow()</code>. Now beyond outputing the visualised optical flow vectors, the function will output a csv containing the timestamp, previous and current (x,y) positions, vector magnitude, vector angle, status and error rate for each tracked point at every frame.</li></ul><h3 id="changed-7" tabindex="-1">Changed <a class="header-anchor" href="#changed-7" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li><code>get_optical_flow()</code> has now been fully parameterized. The Lucas-Kanade optical flow control parameters were previously hard-coded values, but are now available to be passed as input parameters with predefined defaults. New parameters include <code>max_corners</code>, <code>corner_quality_lvl</code>, <code>min_corner_distance</code>, <code>win_size</code>, <code>max_pyr_lvl</code>, <code>max_lk_iter</code> and <code>lk_accuracy_thresh</code>.</li><li>Both <code>point_color</code> and <code>vector_color</code> are now available as input parameters.</li></ul><h3 id="removed-7" tabindex="-1">Removed <a class="header-anchor" href="#removed-7" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-2-2024-12-17" tabindex="-1">[0.6.2] - 2024-12-17 <a class="header-anchor" href="#_0-6-2-2024-12-17" aria-label="Permalink to &quot;[0.6.2] - 2024-12-17&quot;">​</a></h2><h3 id="added-8" tabindex="-1">Added <a class="header-anchor" href="#added-8" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>get_optical_flow()</code> has been implemented. The function makes use of the Shi-Tomasi corners algorithm to find good points to track, and passes these points on to the Lucas-Kanade sparse optical flow algorithm. At each new frame, the function draws a point over the current positions of the good points list, then using inter-frame movement draws motion vector histories of each point overtop of the input file.</li><li>Alternatively to using the Shi-Tomasi good corners algorithm, the user may provide a set of FaceMesh landmark id&#39;s to track within the input parameter <code>landmarks_to_track</code>.</li></ul><h3 id="changed-8" tabindex="-1">Changed <a class="header-anchor" href="#changed-8" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-8" tabindex="-1">Removed <a class="header-anchor" href="#removed-8" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-1-2024-12-09" tabindex="-1">[0.6.1] - 2024-12-09 <a class="header-anchor" href="#_0-6-1-2024-12-09" aria-label="Permalink to &quot;[0.6.1] - 2024-12-09&quot;">​</a></h2><h3 id="added-9" tabindex="-1">Added <a class="header-anchor" href="#added-9" aria-label="Permalink to &quot;Added&quot;">​</a></h3><h3 id="changed-9" tabindex="-1">Changed <a class="header-anchor" href="#changed-9" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Bug causing grid-scramble order to be recomputed midway through file processing has been fixed.</li><li>Bug causing jittery movement of facial landmarks when using <code>LANDMARK_SCRAMBLE</code> with video files has been fixed.</li></ul><h3 id="removed-9" tabindex="-1">Removed <a class="header-anchor" href="#removed-9" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-6-0-2024-12-07" tabindex="-1">[0.6.0] - 2024-12-07 <a class="header-anchor" href="#_0-6-0-2024-12-07" aria-label="Permalink to &quot;[0.6.0] - 2024-12-07&quot;">​</a></h2><h3 id="added-10" tabindex="-1">Added <a class="header-anchor" href="#added-10" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Function <code>facial_scramble()</code> now takes an input parameter <code>scramble_method</code>. Three new scrambling methods have been defined within <code>pyfameutils</code>. These include <code>LOW_LEVEL_GRID_SCRAMBLE</code>, <code>HIGH_LEVEL_GRID_SCRAMBLE</code> and <code>LANDMARK_SCRAMBLE</code>.</li><li>Landmark based scrambling is a new addition to the function. It takes the eyes, eyebrows, nose and mouth, and randomly swaps their positions and orientation. In order to provide seamless gaps between the underlying face and the manipulated landmark regions, the landmarks are cut out and stored, then the holes in the image are filled using the Telea image inpainting algorithm. Telea inpainting fills the image holes with a smooth gradient sampled from nearest neighbouring pixels.</li><li>In order to seamlessly paste the facial landmarks back onto the face, cv2&#39;s SeamlessClone() method was used to ensure proper blending of landmark edges into the facial skin tone.</li></ul><h3 id="changed-10" tabindex="-1">Changed <a class="header-anchor" href="#changed-10" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Grid-based scrambling has been subdivided into <code>LOW_LEVEL_GRID_SCRAMBLE</code> and <code>HIGH_LEVEL_GRID_SCRAMBLE</code>. High level grid scrambling will function the same as previously implemented, with fully random shuffling of grid squares. Low level grid scrambling will make use of a new parameter <code>GRID_SCRAMBLE_THRESHOLD</code>; which defines the max x or y distance that a particular grid square can be moved from its original position.</li><li>In order to reduce computation time from recomputing grid-square positions at each frame, the shuffled grid order is now precomputed prior to the functions main running loop. Beyond the grid-shuffle order, both grid-shuffling methods are implemented essentially the same. So precomputing the shuffle order allows for the removal of many lines of duplicate code.</li><li>Many papers performing these types of facial scrambling/shuffling operate over grayscale images and video. As such <code>facial_scramble</code> now includes input parameter <code>out_grayscale</code> in order to toggle grayscale and color outputs.</li></ul><h3 id="removed-10" tabindex="-1">Removed <a class="header-anchor" href="#removed-10" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-5-9-2024-12-02" tabindex="-1">[0.5.9] - 2024-12-02 <a class="header-anchor" href="#_0-5-9-2024-12-02" aria-label="Permalink to &quot;[0.5.9] - 2024-12-02&quot;">​</a></h2><h3 id="added-11" tabindex="-1">Added <a class="header-anchor" href="#added-11" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>facial_scramble</code> has been implemented. This function currently can perform grid-based shuffling of the face. Input parameter <code>grid_square_size</code> specifies the square dimensions (in pixels) of each grid square, and is used to compute the optimal grid arrangement to encapsulate the entire face with minimal background inclusions.</li><li>The grid shuffle order is computed randomly using NumPy&#39;s <code>default_rng()</code>. A random seed may be passed as an input parameter to ensure reproducable outputs.</li></ul><h3 id="changed-11" tabindex="-1">Changed <a class="header-anchor" href="#changed-11" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-11" tabindex="-1">Removed <a class="header-anchor" href="#removed-11" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-5-8-2024-11-24" tabindex="-1">[0.5.8] - 2024-11-24 <a class="header-anchor" href="#_0-5-8-2024-11-24" aria-label="Permalink to &quot;[0.5.8] - 2024-11-24&quot;">​</a></h2><h3 id="added-12" tabindex="-1">Added <a class="header-anchor" href="#added-12" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Bug fixes for <code>apply_noise()</code>.</li><li><code>apply_noise()</code> has been further expanded to include masking capabilities, and is now compatible with all predefined mask variables available in <code>pyfameutils</code>.</li></ul><h3 id="changed-12" tabindex="-1">Changed <a class="header-anchor" href="#changed-12" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-12" tabindex="-1">Removed <a class="header-anchor" href="#removed-12" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li>Removed <code>random</code> as a dependency; all random operations are now computed using NumPy&#39;s random generator class.</li></ul><h2 id="_0-5-7-2024-11-20" tabindex="-1">[0.5.7] - 2024-11-20 <a class="header-anchor" href="#_0-5-7-2024-11-20" aria-label="Permalink to &quot;[0.5.7] - 2024-11-20&quot;">​</a></h2><h3 id="added-13" tabindex="-1">Added <a class="header-anchor" href="#added-13" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>New function <code>apply_noise()</code> has been implemented. This function provides three noise operations to select from; &#39;pixelate&#39;, &#39;gaussian&#39; and &#39;salt and pepper&#39;.</li><li><code>apply_noise()</code> provides a variety of customization options such as specifying the noise probability, mean and standard deviation of the gaussian curve to be sampled from, as well as a random seed to be passed to the numpy random number generator.</li><li>An expanded set of masking options has been added to pyfameutils.MASK_OPTIONS for use with <code>mask_face_region()</code>. <code>mask_face_region</code> now also allows the user to specify the background color of output files via a BGR integer color code.</li></ul><h3 id="changed-13" tabindex="-1">Changed <a class="header-anchor" href="#changed-13" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Previous masking options FACE_OVAL and FACE_OVAL_TIGHT have been removed and replaced by the singular FACE_OVAL_MASK in hopes to alleviate any user confusion between the two options previously.</li><li>PsyFace has been officially renamed to PyFAME: the Python Facial Analysis and Manipulation Environment.</li></ul><h3 id="removed-13" tabindex="-1">Removed <a class="header-anchor" href="#removed-13" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-5-6-2024-11-12" tabindex="-1">[0.5.6] - 2024-11-12 <a class="header-anchor" href="#_0-5-6-2024-11-12" aria-label="Permalink to &quot;[0.5.6] - 2024-11-12&quot;">​</a></h2><h3 id="added-14" tabindex="-1">Added <a class="header-anchor" href="#added-14" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Bug fixes for last major feature update (v0.5.5).</li><li><code>CHIN_PATH</code> has been added as a predefined path for use with all facial manipulation functions.</li><li><code>extract_color_channel_means</code> has been renamed as <code>extract_face_color_means</code>. The function now will not only output full-facial means, but also regional color means in the cheek, nose and chin areas for all colour spaces.</li></ul><h3 id="changed-14" tabindex="-1">Changed <a class="header-anchor" href="#changed-14" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>The Hemi-face family of landmark paths have been converted to standard paths, and no longer require in-place computation.</li><li><code>occlude_face_region</code>&#39;s implementation of bar-style occlusion has been reworked, such that now the occluding bar will track correctly with the position of the face and axis of the head (the occluding bar no longer remains paralell to the horizontal axis).</li><li><code>face_color_shift</code>, <code>face_saturation_shift</code> and <code>face_brightness_shift</code> now only take list[list[tuple]] for input parameter <code>landmark_regions</code>. This massively reduces the ammount of duplicate code previously divided among if-else statements based on what was passed to <code>landmark_regions</code>.</li></ul><h3 id="removed-14" tabindex="-1">Removed <a class="header-anchor" href="#removed-14" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-5-3-0-5-5-2024-10-16" tabindex="-1">[0.5.3 - 0.5.5] - 2024-10-16 <a class="header-anchor" href="#_0-5-3-0-5-5-2024-10-16" aria-label="Permalink to &quot;[0.5.3 - 0.5.5] - 2024-10-16&quot;">​</a></h2><h3 id="added-15" tabindex="-1">Added <a class="header-anchor" href="#added-15" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Major feature updates to all facial manipulation functions. <code>face_color_shift</code>, <code>face_saturation_shift</code>, <code>face_brightness_shift</code> and <code>blur_face_region</code> now are all compatible with timing functions, and every predefined landmark region defined within <code>psyfaceutils.py</code>.</li><li>Some of the landmark paths have been redefined as placeholders, as they either need to be calculated in place (hemi-face regions) or require a different method to draw the landmark polygons (Cheek landmark regions form concave polygons).</li><li><code>FACE_SKIN_PATH</code> constant has been defined in order to provided easier access to facial skin colouring, leaving the lips and eyes untouched. For similar ease of use reasons, other commonly used grouped regions have been defined, including <code>CHEEKS_PATH</code> and <code>CHEEKS_NOSE_PATH</code> for use in facial &quot;blushing&quot;.</li></ul><h3 id="changed-15" tabindex="-1">Changed <a class="header-anchor" href="#changed-15" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-15" tabindex="-1">Removed <a class="header-anchor" href="#removed-15" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li>Bad practice global variable declarations have been removed entirely.</li></ul><h2 id="_0-5-2-2024-10-09" tabindex="-1">[0.5.2] - 2024-10-09 <a class="header-anchor" href="#_0-5-2-2024-10-09" aria-label="Permalink to &quot;[0.5.2] - 2024-10-09&quot;">​</a></h2><h3 id="added-16" tabindex="-1">Added <a class="header-anchor" href="#added-16" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li><code>Occlude_face_region</code> can now perform vertical and horizontal hemi-face occlusion. Hemi-face masks rely on the facial screen coords, thus they cannot be precomputed. However, predefined placeholder constants <code>HEMI_FACE_TOP</code>, <code>HEMI_FACE_BOTTOM</code>, <code>HEMI_FACE_LEFT</code>, and <code>HEMI_FACE_RIGHT</code> have been defined and can still be passed in <code>landmarks_to_occlude</code> as any of the other predefined landmark paths can.</li><li>Helper function <code>compute_line_intersection</code> has been created and can be found in <code>psyfaceutils.py</code>.</li><li>Additional masking option <code>EYES_NOSE_MOUTH_MASK</code> has been added to <code>mask_face_region</code>.</li></ul><h3 id="changed-16" tabindex="-1">Changed <a class="header-anchor" href="#changed-16" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><h3 id="removed-16" tabindex="-1">Removed <a class="header-anchor" href="#removed-16" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li>Predefined landmark paths <code>UPPER_FACE_PATH</code> and <code>LOWER_FACE_PATH</code> have been removed, and replaced with <code>HEMI_FACE_TOP</code>, and <code>HEMI_FACE_BOTTOM</code> respectively.</li></ul><h2 id="_0-5-1-2024-10-03" tabindex="-1">[0.5.1] - 2024-10-03 <a class="header-anchor" href="#_0-5-1-2024-10-03" aria-label="Permalink to &quot;[0.5.1] - 2024-10-03&quot;">​</a></h2><h3 id="added-17" tabindex="-1">Added <a class="header-anchor" href="#added-17" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li><code>Blur_face_region</code> provides dynamic facial blurring functionality with several blurring methods (average, gaussian, median) over user-specified facial regions.</li><li>Added horizontal hemi-face occlusion, <code>UPPER_FACE_PATH</code> and <code>LOWER_FACE_PATH</code> constants can be found in psyfaceutils.py.</li></ul><h3 id="changed-17" tabindex="-1">Changed <a class="header-anchor" href="#changed-17" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li><code>Face_luminance_shift</code> has been replaced with <code>face_brightness_shift</code>. <code>Face_brightness_shift</code> will now take an integer shift value in the range [-255, 255], with -255 and 255 representing pure black and white respectively.</li></ul><h3 id="removed-17" tabindex="-1">Removed <a class="header-anchor" href="#removed-17" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li><code>Face_luminance_shift</code> has been removed due to buggy behaviour when manipulating image luminance.</li></ul><h2 id="_0-5-0-2024-09-24" tabindex="-1">[0.5.0] - 2024-09-24 <a class="header-anchor" href="#_0-5-0-2024-09-24" aria-label="Permalink to &quot;[0.5.0] - 2024-09-24&quot;">​</a></h2><h3 id="added-18" tabindex="-1">Added <a class="header-anchor" href="#added-18" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Package documentation is now built with MKDocs</li><li><code>Face_saturation_shift</code> and <code>Face_luminance_shift</code> are now standalone functions, where previously saturation and luma parameters were passed to the Face_color_shift function.</li><li>Github.io hosting for documentation page, as well as refactored github landing page and readme.md.</li><li>License.txt added to root project structure.</li></ul><h3 id="changed-18" tabindex="-1">Changed <a class="header-anchor" href="#changed-18" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li><code>Shift_color_temp</code> was refactored to be a nested function within <code>Face_color_shift</code>, saturation and luminance shifting were relocated to their own specific functions.</li><li>Floodfilling operation involved with foreground-background seperation had some buggy behaviour if there was any discontinuity in the background. An intermediate step was added where prior to floodfilling, the thresholded image is padded with a 10 pixel border, which is removed after the floodfill. This border ensures background continuity when performing the floodfill operation.</li><li>Parameters <code>max_color_shift</code> and <code>max_sat_shift</code> are now renamed to <code>shift_magnitude</code>.</li></ul><h3 id="removed-18" tabindex="-1">Removed <a class="header-anchor" href="#removed-18" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li>Sphinx and readthedocs project files and dependencies</li></ul><h2 id="_0-4-2-2024-08-24" tabindex="-1">[0.4.2] - 2024-08-24 <a class="header-anchor" href="#_0-4-2-2024-08-24" aria-label="Permalink to &quot;[0.4.2] - 2024-08-24&quot;">​</a></h2><h3 id="added-19" tabindex="-1">Added <a class="header-anchor" href="#added-19" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>Sphinx dependency for autodocumentation.</li><li>Rst files defining the documentation build.</li></ul><h3 id="changed-19" tabindex="-1">Changed <a class="header-anchor" href="#changed-19" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Updated readme.md with examples, licenses and link to documentation page</li></ul><h3 id="removed-19" tabindex="-1">Removed <a class="header-anchor" href="#removed-19" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-4-1-2024-08-18" tabindex="-1">[0.4.1] - 2024-08-18 <a class="header-anchor" href="#_0-4-1-2024-08-18" aria-label="Permalink to &quot;[0.4.1] - 2024-08-18&quot;">​</a></h2><h3 id="added-20" tabindex="-1">Added <a class="header-anchor" href="#added-20" aria-label="Permalink to &quot;Added&quot;">​</a></h3><h3 id="changed-20" tabindex="-1">Changed <a class="header-anchor" href="#changed-20" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>v0.4.1 bug fixes for processing directories of mixed file types (images and videos).</li></ul><h3 id="removed-20" tabindex="-1">Removed <a class="header-anchor" href="#removed-20" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-4-0-2024-08-17" tabindex="-1">[0.4.0] - 2024-08-17 <a class="header-anchor" href="#_0-4-0-2024-08-17" aria-label="Permalink to &quot;[0.4.0] - 2024-08-17&quot;">​</a></h2><h3 id="added-21" tabindex="-1">Added <a class="header-anchor" href="#added-21" aria-label="Permalink to &quot;Added&quot;">​</a></h3><h3 id="changed-21" tabindex="-1">Changed <a class="header-anchor" href="#changed-21" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>v0.4 Refactored all methods; moved repetative frame operations to nested functions for increased readability.</li><li>Fixed buggy behaviour when working with still images over all methods. On top of video formats .MP4 and .MOV, you can now perform facial masking, occlusion and colour shifting over image formats .jpg, .jpeg, .png, and .bmp.</li><li>Increased error handling; methods should now be able to process large directories of mixed file formats efficiently in a single call.</li></ul><h3 id="removed-21" tabindex="-1">Removed <a class="header-anchor" href="#removed-21" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-3-1-2024-08-11" tabindex="-1">[0.3.1] - 2024-08-11 <a class="header-anchor" href="#_0-3-1-2024-08-11" aria-label="Permalink to &quot;[0.3.1] - 2024-08-11&quot;">​</a></h2><h3 id="added-22" tabindex="-1">Added <a class="header-anchor" href="#added-22" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>v0.3.1 Support for nose masking and occluding</li></ul><h3 id="changed-22" tabindex="-1">Changed <a class="header-anchor" href="#changed-22" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Added bar-style occlusion options to occlude_face_region(). You can now perform bar-style occlusion on the eyes, nose and mouth regions.</li></ul><h3 id="removed-22" tabindex="-1">Removed <a class="header-anchor" href="#removed-22" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-3-0-2024-08-02" tabindex="-1">[0.3.0] - 2024-08-02 <a class="header-anchor" href="#_0-3-0-2024-08-02" aria-label="Permalink to &quot;[0.3.0] - 2024-08-02&quot;">​</a></h2><h3 id="added-23" tabindex="-1">Added <a class="header-anchor" href="#added-23" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>v0.3 occlude_face_region()</li></ul><h3 id="changed-23" tabindex="-1">Changed <a class="header-anchor" href="#changed-23" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Redefined the naming convention used for constants in utils.py</li></ul><h3 id="removed-23" tabindex="-1">Removed <a class="header-anchor" href="#removed-23" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-2-2-2024-07-31" tabindex="-1">[0.2.2] - 2024-07-31 <a class="header-anchor" href="#_0-2-2-2024-07-31" aria-label="Permalink to &quot;[0.2.2] - 2024-07-31&quot;">​</a></h2><h3 id="added-24" tabindex="-1">Added <a class="header-anchor" href="#added-24" aria-label="Permalink to &quot;Added&quot;">​</a></h3><h3 id="changed-24" tabindex="-1">Changed <a class="header-anchor" href="#changed-24" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Changed mp4 video codec from h264 to cv2 supported mp4v.</li><li>Mask_face_region and face_color_shift now take confidence parameters for the underlying mediapipe face landmarker model.</li><li>Implemented otsu thresholding to isolate foreground to use as a mask. This foreground mask ensures that no background artifacts are present in the facial color shifting, or facial masking.</li><li>Added documentation for new function parameters.</li></ul><h3 id="removed-24" tabindex="-1">Removed <a class="header-anchor" href="#removed-24" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-2-1-2024-07-24" tabindex="-1">[0.2.1] - 2024-07-24 <a class="header-anchor" href="#_0-2-1-2024-07-24" aria-label="Permalink to &quot;[0.2.1] - 2024-07-24&quot;">​</a></h2><h3 id="added-25" tabindex="-1">Added <a class="header-anchor" href="#added-25" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>v0.2.1 transcode_video_to_mp4()</li></ul><h3 id="changed-25" tabindex="-1">Changed <a class="header-anchor" href="#changed-25" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>All functions will work by default with .mp4 and .mov video files. If an older container is being used, see transcode_video_to_mp4 to convert video codecs.</li><li>Bug fixes with facial mask in face_color_shift; removed background artifacts present in the masked facial region.</li></ul><h3 id="removed-25" tabindex="-1">Removed <a class="header-anchor" href="#removed-25" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><ul><li>Removed dependancy ffprobe-python.</li></ul><h2 id="_0-2-0-2024-07-21" tabindex="-1">[0.2.0] - 2024-07-21 <a class="header-anchor" href="#_0-2-0-2024-07-21" aria-label="Permalink to &quot;[0.2.0] - 2024-07-21&quot;">​</a></h2><h3 id="added-26" tabindex="-1">Added <a class="header-anchor" href="#added-26" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>v0.2 added dependancy ffprobe-python.</li></ul><h3 id="changed-26" tabindex="-1">Changed <a class="header-anchor" href="#changed-26" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Added input file codec sniffing, output video files will now match input type for mask_face_region and face_color_shift.</li></ul><h3 id="removed-26" tabindex="-1">Removed <a class="header-anchor" href="#removed-26" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-1-1-2024-07-20" tabindex="-1">[0.1.1] - 2024-07-20 <a class="header-anchor" href="#_0-1-1-2024-07-20" aria-label="Permalink to &quot;[0.1.1] - 2024-07-20&quot;">​</a></h2><h3 id="added-27" tabindex="-1">Added <a class="header-anchor" href="#added-27" aria-label="Permalink to &quot;Added&quot;">​</a></h3><h3 id="changed-27" tabindex="-1">Changed <a class="header-anchor" href="#changed-27" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Minor bug fix for negative saturation shift.</li></ul><h3 id="removed-27" tabindex="-1">Removed <a class="header-anchor" href="#removed-27" aria-label="Permalink to &quot;Removed&quot;">​</a></h3><h2 id="_0-1-0-2024-07-17" tabindex="-1">[0.1.0] - 2024-07-17 <a class="header-anchor" href="#_0-1-0-2024-07-17" aria-label="Permalink to &quot;[0.1.0] - 2024-07-17&quot;">​</a></h2><h3 id="added-28" tabindex="-1">Added <a class="header-anchor" href="#added-28" aria-label="Permalink to &quot;Added&quot;">​</a></h3><ul><li>v0.1 mask_face_region()</li><li>v0.1 extract_color_channel_means()</li><li>v0.1 face_color_shift()</li><li>v0.1 shift_color_temp()</li></ul><h3 id="changed-28" tabindex="-1">Changed <a class="header-anchor" href="#changed-28" aria-label="Permalink to &quot;Changed&quot;">​</a></h3><ul><li>Updated documentation and type hints for all package functions.</li><li>Vectorized color shifting operations in shift_color_temp, massively reducing time costs.</li><li>Restructured package into src, data and testing folders.</li><li>Moved constants and helper functions into utils.py.</li></ul><h3 id="removed-28" tabindex="-1">Removed <a class="header-anchor" href="#removed-28" aria-label="Permalink to &quot;Removed&quot;">​</a></h3>',172)]))}const f=a(n,[["render",t]]);export{m as __pageData,f as default};
