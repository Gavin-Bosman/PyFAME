import{_ as t,c as i,o as s,ae as a}from"./chunks/framework.C5RTWoTo.js";const f=JSON.parse('{"title":"Temporal Transforms","description":"","frontmatter":{"layout":"doc","title":"Temporal Transforms","prev":{"text":"Scrambling","link":"/reference/scrambling"},"next":{"text":"Utilities","link":"/reference/utils"}},"headers":[],"relativePath":"reference/temporal_transforms.md","filePath":"reference/temporal_transforms.md"}'),l={name:"reference/temporal_transforms.md"};function n(r,e,d,o,h,p){return s(),i("div",null,e[0]||(e[0]=[a(`<h1 id="temporal-transforms-module-reference" tabindex="-1">Temporal Transforms Module Reference <a class="header-anchor" href="#temporal-transforms-module-reference" aria-label="Permalink to &quot;Temporal Transforms Module Reference&quot;">​</a></h1><h2 id="shuffle_frames" tabindex="-1">Shuffling Frame-Blocks <a class="header-anchor" href="#shuffle_frames" aria-label="Permalink to &quot;Shuffling Frame-Blocks {#shuffle_frames}&quot;">​</a></h2><p><code>shuffle_frame_order()</code> provides users the ability to temporally segment groups of frames in a video (in &#39;blocks&#39;), and shuffle their ordering. The function can perform 6+ frame shuffling operations, ranging from random reassignment to cyclic shuffling to frame-interleaving. The <code>block_order</code> input parameter expects a tuple containing a zero-indexed list specifying the block ordering, and an integer specifying the number of frames per block. Both of these values can be provided manually, but the parameter is set up in this way to accept the output of helper function <code>generate_shuffled_block_array()</code>. The total number of frames in the input video often will not evenly divide into a set number of blocks, thus the <code>drop_last_block</code> parameter can be passed to drop the last uneven block from the output video.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shuffle_frame_order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    input_dir:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, output_dir:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, shuffle_method:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FRAME_SHUFFLE_RANDOM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rand_seed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, block_order:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, block_duration:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    drop_last_block:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, with_sub_dirs:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>input_dir</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;">A path string to the directory containing files to process.</td></tr><tr><td style="text-align:left;"><code>output_dir</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;">A path string to the directory where processed files will be output.</td></tr><tr><td style="text-align:left;"><code>shuffle_method</code></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">An integer flag specifying the frame shuffling method to be used. The default is <code>pyfame.FRAME_SHUFFLE_RANDOM</code>, for a full list of shuffling options see <code>pyfame.utils.display_shuffle_method_options()</code>.</td></tr><tr><td style="text-align:left;"><code>rand_seed</code></td><td style="text-align:left;"><code>int</code> or <code>None</code></td><td style="text-align:left;">An integer seed to the random number generator used in the frame shuffling operations.</td></tr><tr><td style="text-align:left;"><code>block_order</code></td><td style="text-align:left;"><code>tuple</code> or <code>None</code></td><td style="text-align:left;">A tuple containing a zero-indexed list of integers specifying the block ordering, and an integer specifying the number of frames per block. These can be manually provided or generated and directly passed from <code>generate_shuffled_block_array()</code>.</td></tr><tr><td style="text-align:left;"><code>block_duration</code></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">The time duration in milliseconds of each temporal block. The exact frame count of each block depends on the input video&#39;s fps, but an example duration of 500ms with a 30fps video would result in ~15 frames per temporal block.</td></tr><tr><td style="text-align:left;"><code>drop_last_block</code></td><td style="text-align:left;"><code>bool</code></td><td style="text-align:left;">A boolean flag specifying if the last (uneven sized) block should be dropped from the output video.</td></tr><tr><td style="text-align:left;"><code>with_sub_dirs</code></td><td style="text-align:left;"><code>bool</code></td><td style="text-align:left;">A boolean flag specifying if the input directory contains nested subdirectories.</td></tr></tbody></table><h3 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error Handling&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">Raises</th><th style="text-align:left;">Encountered Error</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ValueError</code></td><td style="text-align:left;">Given unrecognized input parameter values.</td></tr><tr><td style="text-align:left;"><code>TypeError</code></td><td style="text-align:left;">Given invalid input parameter typings.</td></tr><tr><td style="text-align:left;"><code>OSError</code></td><td style="text-align:left;">Given an invalid path-string for either <code>input_dir</code> or <code>output_dir</code>.</td></tr><tr><td style="text-align:left;"><code>FileReadError</code></td><td style="text-align:left;">If an error is encountered instantiating <code>cv2.VideoCapture()</code> or calling <code>cv2.imRead()</code>.</td></tr><tr><td style="text-align:left;"><code>FileWriteError</code></td><td style="text-align:left;">If an error is encountered instantiating <code>cv2.VideoWriter()</code> or calling <code>cv2.imWrite()</code>.</td></tr><tr><td style="text-align:left;"><code>UnrecognizedExtensionError</code></td><td style="text-align:left;">If the function encounters an unrecognized image or video file extension.</td></tr></tbody></table><h2 id="frame_order" tabindex="-1">Generating Block-Order Array <a class="header-anchor" href="#frame_order" aria-label="Permalink to &quot;Generating Block-Order Array {#frame_order}&quot;">​</a></h2><p><code>generate_shuffled_block_array()</code> is a helper function to <code>shuffle_frame_order()</code> that allows users to provide an input video, a shuffling method, and a temporal block duration, which returns a tuple containing (block order array, num frames per block). This function was created in order to abstract the <code>block_size</code> (num frames per block) from the user, as determining it&#39;s value was not very intuitive. Instead, using the <code>block_duration</code> and <code>shuffle_method</code>, <code>generate_shuffled_block_array()</code> automatically computes the optimal <code>block_size</code>, then uses it to generate a block order array, shuffled using the method of choice. The output block order array is a zero-indexed array, that determines the order that the frame-blocks will be written out in <code>shuffle_frame_order()</code>. Additionally, in order to ease the processing pipeline, the output of <code>generate_shuffled_block_array()</code> can be directly passed as an input parameter <code>block_order</code> to the <code>shuffle_Frame_order()</code> function.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_shuffled_block_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    file_path:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, shuffle_method:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FRAME_SHUFFLE_RANDOM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rand_seed:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    block_duration:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>file_path</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;">The path string to the input video file.</td></tr><tr><td style="text-align:left;"><code>shuffle_method</code></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">An integer flag specifying the frame shuffling method to be used. The default is <code>pyfame.FRAME_SHUFFLE_RANDOM</code>, for a full list of shuffling options see <code>pyfame.utils.display_shuffle_method_options()</code>.</td></tr><tr><td style="text-align:left;"><code>rand_seed</code></td><td style="text-align:left;"><code>int</code> or <code>None</code></td><td style="text-align:left;">An integer seed to the random number generator used in the frame shuffling operations.</td></tr><tr><td style="text-align:left;"><code>block_duration</code></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;">The time duration in milliseconds of each temporal block. The exact frame count of each block depends on the input video&#39;s fps, but an example duration of 500ms with a 30fps video would result in ~15 frames per temporal block.</td></tr></tbody></table><h3 id="error-handling-1" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling-1" aria-label="Permalink to &quot;Error Handling&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">Raises</th><th style="text-align:left;">Encountered Error</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ValueError</code></td><td style="text-align:left;">Given unrecognized input parameter values.</td></tr><tr><td style="text-align:left;"><code>TypeError</code></td><td style="text-align:left;">Given invalid input parameter typings.</td></tr><tr><td style="text-align:left;"><code>OSError</code></td><td style="text-align:left;">Given an invalid path-string for either <code>input_dir</code> or <code>output_dir</code>.</td></tr><tr><td style="text-align:left;"><code>FileReadError</code></td><td style="text-align:left;">If an error is encountered instantiating <code>cv2.VideoCapture()</code> or calling <code>cv2.imRead()</code>.</td></tr></tbody></table>`,13)]))}const k=t(l,[["render",n]]);export{f as __pageData,k as default};
